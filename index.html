<script>
  const svgObject = document.getElementById('svgMap');
  let scale = 1;
  let posX = 0;
  let posY = 0;
  let isDragging = false;
  let start = {};

  svgObject.addEventListener('load', () => {
    const svgDoc = svgObject.contentDocument;
    const svg = svgDoc.querySelector('svg');
    const paths = svg.querySelectorAll('path');

    svg.style.transition = 'transform 0.1s ease';

    // Hover color change
    paths.forEach(p => {
      p.style.fill = '#cfcfcf';
      p.addEventListener('mouseenter', () => p.style.fill = '#4faaf5');
      p.addEventListener('mouseleave', () => p.style.fill = '#cfcfcf');
    });

    // ZOOM on wheel
    svg.addEventListener('wheel', e => {
      e.preventDefault();
      const delta = e.deltaY < 0 ? 0.1 : -0.1;
      scale = Math.min(Math.max(0.5, scale + delta), 4);
      updateTransform();
    });

    // PAN (drag anywhere)
    svg.addEventListener('mousedown', e => {
      isDragging = true;
      start = { x: e.clientX - posX, y: e.clientY - posY };
      svg.style.cursor = 'grabbing';
    });

    svg.addEventListener('mousemove', e => {
      if (!isDragging) return;
      posX = e.clientX - start.x;
      posY = e.clientY - start.y;
      updateTransform();
    });

    svg.addEventListener('mouseup', () => {
      isDragging = false;
      svg.style.cursor = 'grab';
    });

    svg.addEventListener('mouseleave', () => {
      isDragging = false;
      svg.style.cursor = 'grab';
    });

    function updateTransform() {
      svg.setAttribute('transform', `translate(${posX}, ${posY}) scale(${scale})`);
    }

    // Inițializează pan și zoom
    updateTransform();
  });
</script>
